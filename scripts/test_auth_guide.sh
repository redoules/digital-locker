#!/bin/bash
# Quick Start Guide - Tester l'authentification

echo "======================================================================"
echo "GUIDE DE D√âMARRAGE RAPIDE - AUTHENTICATION"
echo "======================================================================"
echo ""
echo "Ce script vous guide pour tester l'authentification locale."
echo ""

# V√©rifier que le serveur n'est pas d√©j√† lanc√©
if lsof -Pi :8000 -sTCP:LISTEN -t >/dev/null 2>&1; then
    echo "‚úÖ Le serveur Django est d√©j√† en cours d'ex√©cution sur le port 8000"
    echo ""
else
    echo "‚ÑπÔ∏è  Le serveur n'est pas encore d√©marr√©."
    echo ""
    echo "Pour d√©marrer le serveur, ex√©cutez dans un terminal:"
    echo "  uv run python manage.py runserver"
    echo ""
fi

echo "======================================================================"
echo "√âTAPE 1: Cr√©er un superuser"
echo "======================================================================"
echo ""
echo "Ex√©cutez la commande suivante pour cr√©er un compte administrateur:"
echo ""
echo "  uv run python manage.py createsuperuser"
echo ""
echo "Puis entrez:"
echo "  - Email: admin@example.com (ou votre email)"
echo "  - Password: (un mot de passe s√©curis√©)"
echo ""
read -p "Appuyez sur Entr√©e quand c'est fait..."
echo ""

echo "======================================================================"
echo "√âTAPE 2: Tester les URLs d'authentification"
echo "======================================================================"
echo ""
echo "Ouvrez votre navigateur et testez ces URLs:"
echo ""
echo "1. Login:      http://localhost:8000/accounts/login/"
echo "   ‚Üí Connectez-vous avec le superuser cr√©√©"
echo ""
echo "2. Signup:     http://localhost:8000/accounts/signup/"
echo "   ‚Üí Cr√©ez un nouveau compte utilisateur"
echo ""
echo "3. Admin:      http://localhost:8000/admin/"
echo "   ‚Üí Interface d'administration Django"
echo ""
echo "4. Logout:     http://localhost:8000/accounts/logout/"
echo "   ‚Üí D√©connexion"
echo ""

echo "======================================================================"
echo "√âTAPE 3: V√©rifier les fonctionnalit√©s"
echo "======================================================================"
echo ""
echo "Testez que:"
echo "  ‚úì La page de login affiche les boutons OAuth (Google, GitHub, Strava)"
echo "  ‚úì Le formulaire de connexion locale fonctionne"
echo "  ‚úì Vous pouvez cr√©er un nouveau compte"
echo "  ‚úì La d√©connexion fonctionne correctement"
echo ""

echo "======================================================================"
echo "√âTAPE 4 (OPTIONNELLE): Configurer OAuth"
echo "======================================================================"
echo ""
echo "Pour activer l'authentification OAuth, consultez:"
echo "  üìÑ docs/OAUTH_SETUP.md"
echo ""
echo "Providers disponibles:"
echo "  ‚Ä¢ Google OAuth 2.0"
echo "  ‚Ä¢ GitHub OAuth"
echo "  ‚Ä¢ Strava OAuth"
echo ""

echo "======================================================================"
echo "TESTS AUTOMATIS√âS"
echo "======================================================================"
echo ""
echo "Pour relancer les tests d'authentification:"
echo "  uv run python manage.py test clothing.test_auth"
echo ""
echo "Pour tous les tests:"
echo "  uv run python manage.py test clothing"
echo ""

echo "======================================================================"
echo "DOCUMENTATION COMPL√àTE"
echo "======================================================================"
echo ""
echo "Consultez CHECKPOINT_TASK_4.md pour:"
echo "  ‚Ä¢ Statut d√©taill√© de la configuration"
echo "  ‚Ä¢ Liste compl√®te des tests pass√©s"
echo "  ‚Ä¢ Guide de v√©rification manuelle"
echo "  ‚Ä¢ Instructions OAuth"
echo ""

echo "======================================================================"
echo "‚úÖ T√¢che 4 compl√©t√©e!"
echo "======================================================================"
echo ""
echo "Prochaine √©tape: T√¢che 5 - Vues et templates de l'application"
echo ""
